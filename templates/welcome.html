<!DOCTYPE html>
<html>
  <head>
    <title>Welcome to AutoQuiz</title>
    <!--script src="../static/jquery.min.js" type="text/javascript"></script>
    <script src="../static/bootstrap.min.js" type="text/javascript"></script>
    <script src="../static/analytics.js" type="text/javascript"></script>
    <link href="../static/bootstrap.min.css" type="text/css" rel="stylesheet">
    <link href="../static/bootstrap-theme.min.css" type="text/css" rel="stylesheet">
    <link href="../static/default.css" type="text/css" rel="stylesheet"-->
    <link rel="icon" href="{{ url_for('static', filename='img/alonzo.gif') }}">

    <script src="{{ url_for('static', filename='jquery.min.js') }}" type="text/javascript"></script>
    <script src="{{ url_for('static', filename='bootstrap.min.js') }}" type="text/javascript"></script>
    <script src="{{ url_for('static', filename='analytics.js') }}" type="text/javascript"></script>

    <script type="text/javascript" src="{{ url_for('static', filename='echarts-all-3.js') }}"></script>
    <script type="text/javascript" src="{{ url_for('static', filename='ecStat.min.js') }}"></script>
    <script type="text/javascript" src="{{ url_for('static', filename='dataTool.min.js') }}"></script>

    <link href="{{ url_for('static', filename='bootstrap.min.css') }}" type="text/css" rel="stylesheet">
    <link href="{{ url_for('static', filename='bootstrap-theme.min.css') }}" type="text/css" rel="stylesheet">
    <link href="{{ url_for('static', filename='default.css') }}" type="text/css" rel="stylesheet">

    <!--link href="{{ url_for('static', filename='dataTables.bootstrap.min.css') }}" type="text/css" rel="stylesheet">
    <link href="{{ url_for('static', filename='jquery.dataTables.min.css') }}" type="text/css" rel="stylesheet">
    <script type="text/javascript" src="{{ url_for('static', filename='jquery.dataTables.min.js') }}"></script>
    <script type="text/javascript" src="{{ url_for('static', filename='dataTables.bootstrap.js') }}"></script-->
    <link href="{{ url_for('static', filename='bootstrap-table.css') }}" type="text/css" rel="stylesheet">
    <script type="text/javascript" src="{{ url_for('static', filename='bootstrap-table.js') }}"></script>

  </head>

  <body>
    <nav class="llab-nav navbar navbar-default navbar-fixed-top" role="navigation">
      <div class="nav navbar-nav navbar-left navbar-title">CS10 AutoQuiz | Fall 2017 | UC Berkeley</div>
      <div class="nav navbar-nav navbar-right">
        <ul class="nav-btns btn-group">
          <!--a class="btn btn-default" href="url_for('default_entry')">logout</a-->
          <a class="btn btn-default">logout</a>
          <a class="btn btn-default" href="http://cs10.org/fa17/" target="_blank">course website</a>
          <!--button type="button" class="btn btn-secondary"> Log Out </button-->
        </ul>
      </div>
    </nav>
    <div class="title-small-screen">CS10 AutoQuiz | Fall 2017 | UC Berkeley</div>
    <div class="llab-full">
      <p>
        This is an AutoQuiz of The Beauty and Joy of Computing (Berkeley CS10) course during
        Fall 2017.
      </p>

      <script>
        var ZOOMABLE=false;
        function prep_display() {
          render_graph(ZOOMABLE);
        }
        function update_display() {
          ZOOMABLE = !ZOOMABLE;
          render_graph(ZOOMABLE);
        }
        function status_format(value, row, index, field) {
          if (value === -1) {
            return '&#10068;';
          } else if (value === 0) {
            return '<font color="orange">&#10008;</font>';
          } else if (value === 1) {
            return '<font color="green">&#10004;</font>';
          }
          return value;
        }
      </script>

      <div style="display:none;">
        <form action="{{ url_for('exercise_section') }}" method=post id="graph_node_selection_form">
          <input type=hidden name=section_id value=10 id="section_id"/>
        </form>
      </div>

      <ul id="myTab" class="nav nav-pills boardered">
        <li class="active"><a href="#structure" data-toggle="tab">Structure</a></li>
        <li><a href="#topics" data-toggle="tab">Topics</a></li>
        <li><a href="#topic_1" data-toggle="tab">Topic 1: Math</a></li>
        <li><a href="#topic_2" data-toggle="tab">Topic 2: Programming</a></li>
        <li><a href="#topic_3" data-toggle="tab">Topic 3: Data Struct</a></li>
        <li><a href="#topic_4" data-toggle="tab">Topic 4: Algorithm</a></li>
        <li><a href="#random" data-toggle="tab">Random Walk</a></li>
      </ul>
      <div id="myTabContent" class="tab-content">
        <div class="tab-pane fade in active" id="structure">
          <div style="width:50%;text-align:center;margin-left:auto;margin-right:auto;padding-top:10px;">
              <h2>Knowledge Structure</h2>
              <!--h5><input type="checkbox" id='zoomable' name="roam_checkbox" value="roam" checked onchange="update_display();"> Zoomable</h5-->
              <h5><input type="checkbox" id='zoomable' name="roam_checkbox" value="roam" onchange="update_display();"> Zoomable</h5>
          </div>
          <div class="topic_container" id="graph_container" style="height: 500px;">
          </div>
        </div>
        <div class="tab-pane fade" id="topics">

          <div class="topic_container">
            <table class="table">
              <caption>Topics included in the system are listed here</caption>
              <thead>
                <tr>
                  <th>Topic</th>
                  <th>Process</th></tr>
              </thead>
              <tbody>
                {% for topic_elem in all_topics %}
                  <tr>
                    <td><a href="#">Topic {{topic_elem[0]}}: {{topic_elem[1]}}</a></td>
                    <td>
                      <div class="progress">
                          <div class="progress-bar progress-bar-success" role="progressbar"
                               aria-valuenow="60" aria-valuemin="0" aria-valuemax="100"
                               style="width: {{topic_elem[2]}}%;">
                              <span class="sr-only">{{topic_elem[2]}}% completed</span>
                          </div>
                          <div class="progress-bar progress-bar-warning" role="progressbar"
                             aria-valuenow="60" aria-valuemin="0" aria-valuemax="100"
                             style="width: {{topic_elem[3]}}%;">
                            <span class="sr-only">{{topic_elem[3]}}% half-way done</span>
                          </div>
                      </div>
                    </td>
                  </tr>
                {% endfor %}
              </tbody>
            </table>
            </div>
          </div>
          <div class="tab-pane fade" id="topic_1">
            <table class="table" 
                    data-toggle="table" 
                    data-url="{{ url_for('static', filename='dataset/topic1_test.json') }}"
                    data-pagination="true"
                    data-search="true">
              <caption>Questions included in this topic</caption>
              <thead>
                  <tr>
                      <th data-field="id" data-formatter="Question %s">Question</th>
                      <th data-field="description">Question Description</th>
                      <th data-field="timestamp">Last Tried</th>
                      <th data-field="status" data-formatter="status_format">Status</th>
                  </tr>
              </thead>
              <!--thead>
                <tr>
                  <th>Question</th>
                  <th>Last tried</th>
                  <th>Status</th>
                </tr>
              </thead>
              
              <tbody>
                <tr>
                  <td>Question 1</td>
                  <td>23/11/2013</td>
                  <td><font color="green">&#10004;</font></td>
                </tr>
                <tr>
                  <td>Question 2</td>
                  <td>10/11/2013</td>
                  <td><font color="orange">&#10008;</font></td>
                </tr>
                <tr>
                  <td>Question 3</td>
                  <td>N/A</td>
                  <td>&#10068;</td>
                </tr>
              </tbody-->
              <!-- https://www.rapidtables.com/web/html/html-codes.html -->
            </table>

            
          </div>
          <div class="tab-pane fade" id="topic_2">
          </div>
          <div class="tab-pane fade" id="topic_3">
          </div>
          <div class="tab-pane fade" id="topic_4">
          </div>
        </div>

      </div>

      <script>
        function request_exercise_section(section_id){
          var data = {'section_id': section_id};
          var form = document.getElementById("graph_node_selection_form");
          // console.log(form)
          // console.log('section_id', form.section_id.value)
          form.section_id.value = section_id;
          form.submit();
        }
        function request_topic_id(topic_id){
          // 2 is for the first and second panels
          $('#myTab li:eq('+(topic_id+2)+') a').tab('show');
        }
        function get_knowledge_graph_data() {
          return [{
                    name: 'Topic 1:\nMath Basics',
                    id: 0,
                    x: 300,
                    y: 300,
                    value: 100,
                    itemStyle: {
                        normal: {
                            color: "green",
                        }
                    }
                }, {
                    name: 'Topic 2:\nProgramming Basis',
                    id: 1,
                    x: 550,
                    y: 100,
                    value: 80,
                    itemStyle: {
                        normal: {
                            color: "gray",
                        }
                    }
                }, {
                    name: 'Topic 4:\nAlgorithm',
                    id: 2,
                    x: 800,
                    y: 300,
                    value: 70,
                    itemStyle: {
                        normal: {
                            color: "gray",
                        }
                    }
                }, {
                    name: 'Topic 3:\nData Structure',
                    id: 3,
                    x: 550,
                    y: 500,
                    value: 60,
                    itemStyle: {
                        normal: {
                            color: "gray",
                        }
                    }
                }];
        }
        function get_knowledge_graph_link() {
          return [{
                    source: 0,
                    target: 3,
                }, {
                    source: 0,
                    target: 1
                }, {
                    source: 3,
                    target: 2
                }, {
                    source: 1,
                    target: 2
                }];
          /*
          return [{
                    source: 'Math',
                    target: 'Data Structure',
                    // label: {
                    //     normal: {
                    //         show: true
                    //     }
                    // },
                    // lineStyle: {
                    //     normal: { curveness: 0.2 }
                    // }
                }, {
                    source: 'Math',
                    target: 'Algorithm'
                }, {
                    source: 'Data Structure',
                    target: 'Programming'
                }, {
                    source: 'Algorithm',
                    target: 'Programming'
                }];
                */
        }
      </script>
      <script src="{{ url_for('static', filename='knowledge_graph.js') }}" type="text/javascript" onload="prep_display();">

        // console.log(document.getElementById("zoomable").checked);
        // render_graph(true);
      </script>
    

    </div>
    <script>
        $(function () {
            $('#myTab li:eq(0) a').tab('show');
            /* $('#topic_1').bootstrapTable({
            });*/
        });
    </script>
  </body>

</html>